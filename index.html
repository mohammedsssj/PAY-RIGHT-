<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تحليل نمط الشخصية</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f0f0f0;
      padding: 30px;
      direction: rtl;
      text-align: right;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .question {
      margin-bottom: 20px;
    }
    button {
      background-color: #2196F3;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-top: 10px;
      cursor: pointer;
      border-radius: 5px;
    }
    .result {
      font-size: 1.2em;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="quiz"></div>
    <div id="result" class="result"></div>
  </div>

  <script>
    const questions = [
      {
        text: "هل تفضل قضاء الوقت مع الآخرين؟",
        options: [
          { text: "نعم جدًا", type: "اجتماعي" },
          { text: "أحيانًا", type: "متوازن" },
          { text: "أفضل العزلة", type: "هادئ" }
        ]
      },
      {
        text: "كيف تتخذ قراراتك عادة؟",
        options: [
          { text: "بناءً على المشاعر", type: "عاطفي" },
          { text: "بشكل عقلاني", type: "تحليلي" },
          { text: "حسب الموقف", type: "مرن" }
        ]
      },
      {
        text: "كيف تتعامل مع الضغط؟",
        options: [
          { text: "أتوتر بسرعة", type: "عاطفي" },
          { text: "أحاول أن أتحكم بنفسي", type: "هادئ" },
          { text: "أتصرف بعقلانية", type: "تحليلي" }
        ]
      },
      {
        text: "ما نوع الأنشطة التي تفضلها؟",
        options: [
          { text: "الأنشطة الجماعية", type: "اجتماعي" },
          { text: "الأنشطة الهادئة كقراءة كتاب", type: "هادئ" },
          { text: "حل الألغاز أو البرمجة", type: "تحليلي" }
        ]
      },
      {
        text: "عندما تواجه مشكلة، ماذا تفعل؟",
        options: [
          { text: "أطلب المساعدة", type: "اجتماعي" },
          { text: "أفكر وأحلل لوحدي", type: "تحليلي" },
          { text: "أنتظر حتى تزول", type: "مرن" }
        ]
      },
      {
        text: "هل تهتم بمشاعر الآخرين؟",
        options: [
          { text: "جداً", type: "عاطفي" },
          { text: "إلى حد ما", type: "مرن" },
          { text: "أركز على المنطق أكثر", type: "تحليلي" }
        ]
      },
      {
        text: "هل تعتبر نفسك قياديًا؟",
        options: [
          { text: "نعم", type: "قائد" },
          { text: "أحيانًا", type: "متوازن" },
          { text: "أفضل أن أتابع", type: "هادئ" }
        ]
      },
      {
        text: "كيف تتعامل مع المفاجآت؟",
        options: [
          { text: "أرتبك", type: "عاطفي" },
          { text: "أتأقلم بسرعة", type: "مرن" },
          { text: "أفكر قبل أن أتصرف", type: "تحليلي" }
        ]
      },
      {
        text: "هل تحب النقاشات؟",
        options: [
          { text: "نعم", type: "اجتماعي" },
          { text: "أحيانًا", type: "متوازن" },
          { text: "أفضل الاستماع", type: "هادئ" }
        ]
      },
      {
        text: "كيف تصف نفسك في العمل الجماعي؟",
        options: [
          { text: "أحب قيادة الفريق", type: "قائد" },
          { text: "أتعاون بهدوء", type: "متوازن" },
          { text: "أفضل العمل بمفردي", type: "هادئ" }
        ]
      },
      {
        text: "هل تحب تجربة أشياء جديدة؟",
        options: [
          { text: "نعم جدًا", type: "اجتماعي" },
          { text: "أحيانًا", type: "مرن" },
          { text: "أفضل الروتين", type: "هادئ" }
        ]
      },
      {
        text: "هل تعتبر نفسك منظمًا؟",
        options: [
          { text: "جداً", type: "تحليلي" },
          { text: "إلى حد ما", type: "مرن" },
          { text: "لا أهتم بالتنظيم", type: "عاطفي" }
        ]
      },
      {
        text: "هل تهتم بالتفاصيل؟",
        options: [
          { text: "نعم", type: "تحليلي" },
          { text: "أحيانًا", type: "مرن" },
          { text: "أركز على الصورة الكبرى", type: "قائد" }
        ]
      },
      {
        text: "هل تحب المساعدة؟",
        options: [
          { text: "دائمًا", type: "اجتماعي" },
          { text: "إذا طُلب مني", type: "متوازن" },
          { text: "نادراً", type: "تحليلي" }
        ]
      },
      {
        text: "كيف تصف يومك المثالي؟",
        options: [
          { text: "مع الأصدقاء", type: "اجتماعي" },
          { text: "في هدوء وتأمل", type: "هادئ" },
          { text: "إنجاز مهام وتحقيق أهداف", type: "قائد" }
        ]
      }
    ];

    let current = 0;
    const answers = [];
    const scores = {};

    const quizDiv = document.getElementById('quiz');
    const resultDiv = document.getElementById('result');

    function showQuestion() {
      const q = questions[current];
      quizDiv.innerHTML = `
        <div class="question">
          <h3>السؤال ${current + 1} من ${questions.length}:</h3>
          <p>${q.text}</p>
          ${q.options.map((opt, i) => `
            <button onclick="answer('${opt.type}')">${opt.text}</button>
          `).join('')}
        </div>
      `;
    }

    function answer(type) {
      answers.push(type);
      scores[type] = (scores[type] || 0) + 1;
      current++;
      if (current < questions.length) {
        showQuestion();
      } else {
        showResult();
        sendToFirebase();
      }
    }

    function showResult() {
      const top = Object.entries(scores).sort((a, b) => b[1] - a[1])[0];
      resultDiv.innerHTML = `
        <strong>نمط شخصيتك هو:</strong> ${top[0]}<br>
        تم التحليل بناءً على إجاباتك.
      `;
      quizDiv.innerHTML = '';
    }

    function sendToFirebase() {
      const payload = {
        timestamp: new Date().toISOString(),
        answers: answers
      };
      fetch("https://shade-4b300-default-rtdb.firebaseio.com/quiz-responses/-ON0NxiWPvOCK8CzygJa/timestamp.json", {
        method: "POST",
        body: JSON.stringify(payload)
      });
    }

    showQuestion();
  </script>
</body>
</html>
