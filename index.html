<!DOCTYPE html><html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الشخصية</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            color: #333;
        }
        .container {
            background: white;
            width: 50%;
            margin: auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #ff5e62;
        }
        label {
            font-weight: bold;
            display: block;
            margin-top: 15px;
        }
        select, input[type="file"], button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background: #ff5e62;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            border: none;
        }
        button:hover {
            background: #e0484f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>اختبار الشخصية</h1>
        <form id="quizForm">
            <div id="questionsContainer"></div>
            <label>رفع صورة (اختياري):</label>
            <input type="file" id="imageUpload"><br>
            <button type="submit">إرسال</button>
        </form>
        <h2 id="result"></h2>
    </div><script>
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com/",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const storage = firebase.storage();

    const questions = [
        "ما هو أفضل وقت من اليوم بالنسبة لك؟",
        "كيف تتفاعل مع التحديات؟",
        "ما هو أسلوبك في التعامل مع الآخرين؟",
        "هل تفضل العزلة أم التجمعات؟",
        "كيف تتعامل مع الضغط النفسي؟",
        "ما هو الشيء الذي يجذبك في الآخرين؟",
        "كيف تقضي وقت فراغك؟",
        "ما مدى أهمية التخطيط في حياتك؟",
        "كيف تصف نفسك في بيئة العمل؟",
        "ما هو الشيء الذي لا يمكنك الاستغناء عنه؟",
        "كيف تتخذ قراراتك؟",
        "ما هو العنصر الأساسي للسعادة بالنسبة لك؟",
        "كيف تتفاعل مع الانتقادات؟",
        "ما هو أسلوبك في حل المشكلات؟",
        "ما مدى أهمية الطموح في حياتك؟",
        "هل تعتمد على العاطفة أم المنطق في حياتك؟",
        "كيف تصف قدرتك على التركيز؟",
        "ما هو أكبر دافع لك في الحياة؟",
        "كيف تصف تفاعلك مع الآخرين؟",
        "هل تفضل الاستقرار أم التغيير؟"
    ];

    const questionsContainer = document.getElementById("questionsContainer");
    questions.forEach((question, index) => {
        const label = document.createElement("label");
        label.textContent = question;
        const select = document.createElement("select");
        select.name = `q${index + 1}`;
        ["دائمًا", "أحيانًا", "نادراً"].forEach(optionText => {
            const option = document.createElement("option");
            option.value = optionText;
            option.textContent = optionText;
            select.appendChild(option);
        });
        questionsContainer.appendChild(label);
        questionsContainer.appendChild(select);
    });

    document.getElementById("quizForm").addEventListener("submit", function(event) {
        event.preventDefault();
        
        const answers = {};
        questions.forEach((_, index) => {
            answers[`q${index + 1}`] = document.querySelector(`select[name='q${index + 1}']`).value;
        });
        
        const file = document.getElementById("imageUpload").files[0];
        const responsesRef = database.ref("quiz-responses");
        
        function analyzePersonality(answers) {
            let score = 0;
            Object.values(answers).forEach(value => {
                if (value === "دائمًا") score += 2;
                else if (value === "أحيانًا") score += 1;
            });
            if (score > 30) return "شخصية قيادية وطموحة";
            else if (score > 20) return "شخصية متوازنة ومرنة";
            else return "شخصية هادئة وحكيمة";
        }
        
        const personalityType = analyzePersonality(answers);
        
        if (file) {
            const storageRef = storage.ref("uploads/" + file.name);
            storageRef.put(file).then(snapshot => {
                snapshot.ref.getDownloadURL().then(url => {
                    responsesRef.push({
                        ...answers,
                        personalityType,
                        imageUrl: url,
                        timestamp: Date.now()
                    });
                    document.getElementById("result").textContent = `نتيجة التحليل: ${personalityType}`;
                });
            });
        } else {
            responsesRef.push({
                ...answers,
                personalityType,
                imageUrl: "",
                timestamp: Date.now()
            });
            document.getElementById("result").textContent = `نتيجة التحليل: ${personalityType}`;
        }
    });
</script>

</body>
</html>
